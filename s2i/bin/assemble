#!/bin/sh

SOURCE_FILE='/tmp/src/dumbnailer.go'

echo 'checking'
stat "$SOURCE_FILE" > /dev/null
if [ $? -ne 0 ]; then
    echo "$SOURCE_FILE does not exist, exiting"
    exit 1
fi

echo 'copying'
cp /tmp/src/dumbnailer.go $SRC_DIR/
cp -r /tmp/src/params $SRC_DIR/
cp /tmp/src/go.mod $SRC_DIR/

echo 'building'
go build -o $BIN_DIR/dumbnailer $SRC_DIR/dumbnailer.go
